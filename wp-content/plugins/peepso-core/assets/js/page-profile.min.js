!function i(s,n,a){function d(t,e){if(!n[t]){if(!s[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(r)return r(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}o=n[t]={exports:{}},s[t][0].call(o.exports,function(e){return d(s[t][1][e]||e)},o,o.exports,i,s,n,a)}return n[t].exports}for(var r="function"==typeof require&&require,e=0;e<a.length;e++)d(a[e]);return d}({1:[function(e,t,o){!function(o){!function(){"use strict";var e,t=(e="undefined"!=typeof window?window.jQuery:void 0!==o?o.jQuery:null)&&e.__esModule?e:{default:e},a="undefined"!=typeof window?window.peepso:void 0!==o?o.peepso:null;const d=+("undefined"!=typeof window?window.peepsodata:void 0!==o?o.peepsodata:null).profile.id;(0,t.default)(function(){let n=(0,t.default)(".ps-js-profile-completeness");if(n.length){let o=n.find(".ps-js-status"),i=n.find(".ps-js-progressbar"),s=n.find(".ps-js-required");a.hooks.addAction("profile_completeness_updated","page_profile_about",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(+e==d){let e=0;void 0!==t.profile_completeness&&(100<=+t.profile_completeness?(e++,o.hide(),i.hide()):(o.html(t.profile_completeness_message).show(),i.show(),i.children("span").css({width:+t.profile_completeness+"%"}))),"undefined"!==t.missing_required&&(+t.missing_required<=0?(e++,s.hide()):s.html(t.missing_required_message).show()),2===e?n.hide():n.show()}})}})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,o){!function(t){!function(){"use strict";var e,a=(e="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&e.__esModule?e:{default:e},d="undefined"!=typeof window?window.peepso:void 0!==t?t.peepso:null,o="undefined"!=typeof window?window.peepsodata:void 0!==t?t.peepsodata:null;(0,a.default)(function(){let i=(0,a.default)("input[name=verify_password]");if(i.length){let e=i.closest("form"),t=e.find("input[type=text], input[type=password]").not(i),o=e.find("[type=submit]");function s(){i.val().trim().length<5?(t.attr("readonly","readonly"),o.attr("disabled","disabled")):(t.removeAttr("readonly"),!function(){let e=!1;return t.each(function(){if(this.value!==(0,a.default)(this).data("ps-value"))return!(e=!0)}),e}()?o.attr("disabled","disabled"):o.removeAttr("disabled"))}t.each(function(){(0,a.default)(this).data("ps-value",this.value)}),t.filter("input[name=user_nicename]").on("input",function(){var e=this.value.replace(/[^a-z0-9-_\.@]/gi,"");this.value!==e&&(this.value=e)}),i.on("input",s),t.on("input",s),s()}}),(0,a.default)(function(){let n;(0,a.default)(".ps-js-profile-delete").on("click",e=>{e.preventDefault(),n||((n=(0,d.dialog)(o.profile.template_profile_deletion,{destroyOnClose:!1}).show()).$el.find("form").on("submit",e=>e.preventDefault()),n.$el.find(".ps-js-cancel").on("click",()=>n.hide()),n.$el.find(".ps-js-submit").on("click",s=>{{s=s.currentTarget;let e=(0,a.default)(s).attr("disabled","disabled"),t=e.find(".ps-js-loading").show(),o=n.$el.find(".ps-js-error").hide(),i=n.$el.find("#ps-js-profile-deletion-pass").val();return void d.ajax.post("profile.delete_profile",{password:i}).then(e=>{e.success?e.data&&((0,d.dialog)(e.data.messages).show(),setTimeout(()=>window.location=e.data.url,3e3)):e.errors&&o.html(e.errors[0]).show()}).always(()=>{t.hide(),e.removeAttr("disabled")})}}),d.hooks.doAction("init_password_preview")),n.$el.find("#ps-js-profile-deletion-pass").val(""),n.$el.find(".ps-js-error").hide(),n.show()})}),(0,a.default)(function(){let s;function t(){let e=s.$el.find(".ps-js-submit").attr("disabled","disabled"),t=e.find(".ps-js-loading").show(),i=s.$el.find(".ps-js-error").hide(),o=s.$el.find("#ps-js-export-data-request-pass").val();d.ajax.post("profile.request_account_data",{password:o}).then(o=>{if(o.success){if(o.data){let e=s.title(),t=(0,d.dialog)(o.data.messages,{title:e});s.hide(),t.show(),setTimeout(()=>{window.location=o.data.url},3e3)}}else o.errors&&i.html(o.errors[0]).show()}).always(()=>{t.hide(),e.removeAttr("disabled")})}(0,a.default)(".ps-js-export-data-request").on("click",e=>{e.preventDefault(),s||((s=(0,d.dialog)(o.profile.template_export_data_request,{destroyOnClose:!1}).show()).$el.find(".ps-js-cancel").on("click",()=>s.hide()),s.$el.find(".ps-js-submit").on("click",()=>t()),s.$el.find("form").on("submit",e=>{e.preventDefault(),t()}),d.hooks.doAction("init_password_preview")),s.$el.find("#ps-js-export-data-request-pass").val(""),s.$el.find(".ps-js-error").hide(),s.show()})}),(0,a.default)(function(){let s;function t(){let e=s.$el.find(".ps-js-submit").attr("disabled","disabled"),t=e.find(".ps-js-loading").show(),i=s.$el.find(".ps-js-error").hide(),o=s.$el.find("#ps-js-export-data-download-pass").val();d.ajax.post("profile.download_account_data",{password:o}).then(o=>{if(o.success){if(o.data){let e=s.title(),t=(0,d.dialog)(o.data.messages,{title:e});s.hide(),t.show(),setTimeout(()=>{t.hide(),window.location=o.data.url},1500)}}else o.errors&&i.html(o.errors[0]).show()}).always(()=>{t.hide(),e.removeAttr("disabled")})}(0,a.default)(".ps-js-export-data-download").on("click",e=>{e.preventDefault(),s||((s=(0,d.dialog)(o.profile.template_export_data_download,{destroyOnClose:!1}).show()).$el.find(".ps-js-cancel").on("click",()=>s.hide()),s.$el.find(".ps-js-submit").on("click",()=>t()),s.$el.find("form").on("submit",e=>{e.preventDefault(),t()}),d.hooks.doAction("init_password_preview")),s.$el.find("#ps-js-export-data-download-pass").val(""),s.$el.find(".ps-js-error").hide(),s.show()})}),(0,a.default)(function(){let s;function t(){let e=s.$el.find(".ps-js-submit").attr("disabled","disabled"),t=e.find(".ps-js-loading").show(),i=s.$el.find(".ps-js-error").hide(),o=s.$el.find("#ps-js-export-data-delete-pass").val();d.ajax.post("profile.delete_account_data_archive",{password:o}).then(o=>{if(o.success){if(o.data){let e=s.title(),t=(0,d.dialog)(o.data.messages,{title:e});s.hide(),t.show(),setTimeout(()=>{window.location=o.data.url},3e3)}}else o.errors&&i.html(o.errors[0]).show()}).always(()=>{t.hide(),e.removeAttr("disabled")})}(0,a.default)(".ps-js-export-data-delete").on("click",e=>{e.preventDefault(),s||((s=(0,d.dialog)(o.profile.template_export_data_delete,{destroyOnClose:!1}).show()).$el.find(".ps-js-cancel").on("click",()=>s.hide()),s.$el.find(".ps-js-submit").on("click",()=>t()),s.$el.find("form").on("submit",e=>{e.preventDefault(),t()}),d.hooks.doAction("init_password_preview")),s.$el.find("#ps-js-export-data-delete-pass").val(""),s.$el.find(".ps-js-error").hide(),s.show()})})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,o){"use strict";e("./about"),e("./notifications"),e("./account")},{"./about":1,"./account":2,"./notifications":4}],4:[function(e,t,o){!function(t){!function(){"use strict";var e,a=(e="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&e.__esModule?e:{default:e},d="undefined"!=typeof window?window.peepsodata:void 0!==t?t.peepsodata:null;let r=[],l=!1;function p(t,o){let i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return new Promise(e=>{e=[t,o,e,i];i?r.unshift(e):r.push(e),setTimeout(u,500)})}function f(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];let t=(0,a.default)(".ps-js-preferences-header"),o=(0,a.default)(".ps-js-preferences-button").filter("[data-type=email]"),i=(0,a.default)(".ps-js-notification-option").find("span[data-type=email]");e?(t.parent(".ps-js-notification-option").show(),o.show(),i.show()):(t.parent(".ps-js-notification-option").hide(),o.hide(),i.hide())}const u=()=>{if(r.length&&!l){var o=r.shift(),i=o[0],s=o[1];let e=[o[2]];var n=o[3];let t={user_id:d.currentuserid,view_user_id:d.userid,fieldname:i,value:s};!n&&r.length&&(o=r.shift(),t.fieldname_extra=o[0],t.value_extra=o[1],e.push(o[2])),l=!0,peepso.postJson("profilepreferencesajax.save_notifications",t,t=>{l=!1,e.forEach(e=>e(t)),u()})}},c=e=>{let t=(0,a.default)(e),o=t.closest(".ps-preferences__checkbox").find("[type=checkbox]").not(t);o.length&&o[0].checked!==t[0].checked&&("onsite"===(e=t.closest("span[data-type]").data("type"))&&!t[0].checked||"email"===e&&t[0].checked)&&o.trigger("click")};(0,a.default)(function(){(0,a.default)(".ps-js-profile-list").on("change","[type=checkbox]",function(){let e=(0,a.default)(this),t=e.closest(".ps-js-notification-option").find(".ps-js-loading"),o=t.find("img"),i=t.find("i");i.stop().hide(),o.show(),p((0,a.default)(this).attr("name"),this.checked?1:0).then(function(){o.hide(),i.show().delay(800).fadeOut()}),c(this)});let s=(0,a.default)("select[name=email_intensity]"),n=(s.off("change.savepref"),s.on("change",function(){let o=this.value,e=s.next(".ps-js-loading"),t=e.find("img"),i=e.find("i");i.stop().hide(),t.show(),p("email_intensity",o,!0).then(e=>{if(t.hide(),i.show().delay(800).fadeOut(),e.success){let e=(0,a.default)("#peepso_email_intensity_descriptions").children(),t=e.filter("#peepso_email_intensity_"+o);t.length&&(e.not(t).hide(),t.show()),f(0==+o)}})}),s.length&&f(0==+s.val()),(0,a.default)("input[name=web_push]"));n.off("change.savepref"),n.on("change",function(){var e=this.checked?1:0;let t=n.closest(".ps-preferences__notification").find(".ps-js-loading"),o=t.find("img"),i=t.find("i");i.stop().hide(),o.show(),p("web_push",e,!0).then(e=>{o.hide(),i.show().delay(800).fadeOut(),e.success&&setTimeout(function(){window.location.reload()},500)})}),(0,a.default)(".ps-preferences__checkbox").children("[data-type=onsite]").find("[type=checkbox]").each(function(){c(this)})})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,H){!function(Y){!function(){"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.default=function(){w||(w=(0,o.dialog)(i.profile.template_avatar,{wide:!0,destroyOnClose:!1}).show(),v=w.$el,_=v.find(".ps-js-upload").on("click",W),g=function(){let e=(0,r.default)('<input type="file" name="filedata" accept="image/*" data-name="profile-avatar-upload" />').css({position:"absolute",opacity:0,height:1,width:1});e.appendTo(document.body),e.psFileupload&&e.psFileupload({formData:{user_id:n,_wpnonce:d},dataType:"json",url:l,replaceFileInput:!1,dropZone:null,add(e,t){let o=t.files[0];o.type.match(/image\/(jpe?g|png|webp)$/i)?o.size>s?Q.html(f).show():(Q.hide(),z("loading"),t.submit()):Q.html(p).show()},done(e,t){t=t.result;t.success?(z(t.data&&t.data.image_url,t.data&&t.data.orig_image_url),q=!0,C=!1,j.removeAttr("disabled")):t.errors&&Q.html(t.errors[0]).show()}});return e}(),y=v.find(".ps-js-remove").on("click",J),m=v.find(".ps-js-gravatar").on("click",E),j=v.find(".ps-js-submit").on("click",I),b=v.find(".ps-js-btn-crop").on("click",L),x=v.find(".ps-js-btn-crop-cancel").on("click",N),k=v.find(".ps-js-btn-crop-save").on("click",X),Q=v.find(".ps-js-error").hide(),F=v.find(".ps-js-loading").hide(),$=v.find(".ps-js-has-avatar"),D=v.find(".ps-js-no-avatar"),M=v.find(".ps-js-original"),A=v.find(".ps-js-preview"),O=v.find(".ps-js-avatar-loading"),z.apply(null,u?[i.profile.img_avatar,i.profile.img_avatar_original]:[]),j.attr("disabled","disabled"));return w};var e,t,r=(e="undefined"!=typeof window?window.jQuery:void 0!==Y?Y.jQuery:null)&&e.__esModule?e:{default:e},o="undefined"!=typeof window?window.peepso:void 0!==Y?Y.peepso:null,i="undefined"!=typeof window?window.peepsodata:void 0!==Y?Y.peepsodata:null;const s=+peepsodata.upload_size,n=+i.profile.id,a=i.profile.img_avatar_default,d=i.profile.avatar_nonce,l=peepsodata.ajaxurl_legacy+"profile.upload_avatar?avatar",p=i.profile.text_error_filetype,f=i.profile.text_error_filesize;let u=+i.profile.has_avatar,c,h,w,v,_,g,y,m,j,b,x,k,Q,F,$,D,M,A,O,T,q=!1,C=!1,P=null;function z(e,t){var o;e?"loading"===e?(y.hide(),D.hide(),$.show(),M.hide(),O.show()):(y.show(),D.hide(),$.show(),o="?nocache-"+(new Date).getTime(),u=!0,c=e,A.attr("src",c+o),O.hide(),M.show(),t&&(h=t,M.attr("src",h+o),window.ps_crop.destroy(M))):(y.hide(),$.hide(),D.show(),u=!1,c=a,h=null,A.attr("src",c),M.removeAttr("src"),window.ps_crop.destroy(M)),b.show(),x.hide(),k.hide()}function W(e){e.preventDefault(),g[0].value=null,g.trigger("click")}function J(e){e.preventDefault();e={user_id:n,_wpnonce:d};o.ajax.post("profile.remove_avatar",e).then(e=>{e.success&&(z(null),window.ps_crop.destroy(M),w.hide(),q=!1,j.attr("disabled","disable"),o.hooks.doAction("profile_avatar_updated",n,a))})}function E(e){e.preventDefault();e={user_id:n,_wpnonce:d};o.ajax.post("profile.use_gravatar",e).then(e=>{e.success&&(z(e=e.data&&e.data.image_url,e),q=!0,C=!0,j.removeAttr("disabled"))})}function I(e){e.preventDefault(),t||(q?(e={user_id:n,use_gravatar:C?1:0,_wpnonce:d},t=!0,o.ajax.post("profile.confirm_avatar",e).then(e=>{e.success&&(e=e.data&&e.data.image_url,window.ps_crop.destroy(M),w.hide(),q=!1,j.attr("disabled","disabled"),o.hooks.doAction("profile_avatar_updated",n,e))}).always(function(){t=!1})):P?(e=r.default.extend(P,{user_id:n,_wpnonce:d},{tmp:"",preview:""}),t=!0,o.ajax.post("profile.crop",e).then(e=>{e.success&&(e.data&&e.data.image_url,window.ps_crop.destroy(M),w.hide(),window.location.reload(!0))}).always(function(){t=!1})):(window.ps_crop.destroy(M),w.hide()))}function L(e){e.preventDefault(),window.ps_crop.init({elem:M,change:e=>{T=function(e,t){let o=(0,r.default)(e),i=1,s=!1,n,a,d;e.naturalWidth&&(n=e.naturalWidth||o.width(),a=e.naturalHeight||o.height(),(800<n||800<a)&&(i=800/Math.max(n,a),n*=i,a*=i,s=!0),i=n/o.width());d={x1:Math.floor(i*t.x),y1:Math.floor(i*t.y),x2:Math.floor(i*(t.x+t.width)),y2:Math.floor(i*(t.y+t.height))},s&&(d.width=n,d.height=a);return d}(M[0],e)}}),b.hide(),x.show(),k.show()}function N(e){e.preventDefault(),window.ps_crop.detach(M),b.show(),x.hide(),k.hide()}function X(e){e.preventDefault(),window.ps_crop.detach(M),b.show(),x.hide(),k.hide();let t={x:T.x1,y:T.y1,x2:T.x2,y2:T.y2,width:T.width,height:T.height};q?t.tmp=1:t.preview=1;e=r.default.extend(t,{user_id:n,_wpnonce:d});o.ajax.post("profile.crop",e).then(e=>{e.success&&(z(e.data.image_url),q||(P=t,j.removeAttr("disabled")))})}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(d,e,t){!function(i){!function(){"use strict";var e=o("undefined"!=typeof window?window.jQuery:void 0!==i?i.jQuery:null),s="undefined"!=typeof window?window.peepso:void 0!==i?i.peepso:null,t="undefined"!=typeof window?window.peepsodata:void 0!==i?i.peepsodata:null,n=o(d("./avatar-dialog"));function o(e){return e&&e.__esModule?e:{default:e}}const a=+t.profile.id;(0,e.default)(function(){let t=(0,e.default)(".ps-js-focus--profile .ps-js-avatar");if(t.length){let o=t.find(".ps-js-avatar-image"),i=t.find(".ps-js-avatar-button-wrapper"),e=(s.hooks.addAction("profile_avatar_updated","page_profile",(e,t)=>{+e==a&&o.attr("src",t),t.match(/\/users\/\d+\//)?(i.css("cursor",""),i.attr("onclick",`peepso.simple_lightbox('${t.replace("-full.","-orig.")}'); return false`)):(i.css("cursor","default"),i.removeAttr("onclick"))}),t.find(".ps-js-avatar-button"));e.on("click",e=>{e.preventDefault(),e.stopPropagation(),(0,n.default)().show()})}})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./avatar-dialog":5}],7:[function(e,t,o){!function(t){!function(){"use strict";var e,u=(e="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&e.__esModule?e:{default:e},c="undefined"!=typeof window?window._:void 0!==t?t._:null,h="undefined"!=typeof window?window.peepso:void 0!==t?t.peepso:null,w=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};t=a(t);if(t&&t.has(e))return t.get(e);var o,i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in e){var n;"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&((n=s?Object.getOwnPropertyDescriptor(e,o):null)&&(n.get||n.set)?Object.defineProperty(i,o,n):i[o]=e[o])}i.default=e,t&&t.set(e,i);return i}("undefined"!=typeof window?window.peepsodata:void 0!==t?t.peepsodata:null);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(a=function(e){return e?o:t})(e)}const v=window.Hammer,_=+w.default.upload_size,g=+w.profile.id,y=w.profile.img_cover_default,m=w.profile.cover_nonce,j=w.default.ajaxurl_legacy+"profile.upload_cover?cover",b=w.profile.text_error_filetype,x=w.profile.text_error_filetype;let k=+w.profile.has_cover,Q;(0,u.default)(function(){let t=(0,u.default)(".ps-js-focus--profile .ps-js-cover");if(!t.length)return;(0,u.default)(".ps-js-cover-upload").on("click",function(e){e.preventDefault(),o[0].value=null,o.trigger("click")});let o=function(){let e=(0,u.default)('<input type="file" name="filedata" accept="image/*" data-name="profile-cover-upload" />').css({position:"absolute",opacity:0,height:1,width:1});e.appendTo(document.body),e.psFileupload&&e.psFileupload({formData:{user_id:g,_wpnonce:m},dataType:"json",url:j,replaceFileInput:!1,dropZone:null,add(e,t){let o=t.files[0];o.type.match(/image\/(jpe?g|png|webp)$/i)?o.size>_?alert(x):(r.css("opacity",.5),n.show(),t.submit()):alert(b)},done(e,t){var o,t=t.result;n.hide(),t.success?(o=t.data.image_url,i.show(),s.show(),k=!0,r.attr("style","").attr("src",o+"?"+Math.random()).one("load",l),h.hooks.doAction("profile_cover_updated",g,o)):t.errors&&alert(t.errors)}});return e}(),i=(0,u.default)(".ps-js-cover-remove").on("click",function(e){e.preventDefault();let t=(0,h.dialog)(w.profile.template_cover_remove).show();t.$el.on("click",".ps-js-cancel",()=>t.hide()),t.$el.on("click",".ps-js-submit",()=>{t.hide(),r.css("opacity",.5);var e={uid:w.currentuserid,user_id:g,_wpnonce:m};h.ajax.post("profile.remove_cover_photo",e).then(e=>{e.success&&(i.hide(),s.hide(),k=!1,r.attr("style","").attr("src",y).one("load",l),h.hooks.doAction("profile_cover_updated",g,y))})})}),s=(0,u.default)(".ps-js-cover-reposition").on("click",function(e){e.preventDefault(),r.data("style",r.attr("style")),r.css("z-index",1),t.addClass("ps-focus-cover-edit"),a.show();let s=d.width()-r.width(),n=d.height()-r.height();r.off("mousedown").on("mousedown",function(e){e.preventDefault()}),void 0!==v&&((Q=new v.Manager(r[0])).add(new v.Pan({direction:v.DIRECTION_ALL,treshhold:0})),Q.on("pan panstart panend",o=>{o.srcEvent.stopPropagation(),o.srcEvent.preventDefault();let i=(0,u.default)(o.target);if("panstart"===o.type)i.data("position",i.position()),i.css("cursor","move");else if("pan"===o.type){let e=i.data("position"),t={top:o.deltaY,left:o.deltaX};t.left=Math.max(t.left,s-e.left),t.left=Math.min(t.left,0-e.left),t.top=Math.max(t.top,n-e.top),t.top=Math.min(t.top,0-e.top),i.css("transform",`translate3d(${t.left}px, ${t.top}px, 0)`)}else{var o=i.position(),e=100*o.left/d.width(),o=100*o.top/d.height(),e=Math.ceil(1e4*e)/1e4,o=Math.ceil(1e4*o)/1e4;i.css({top:o+"%",left:e+"%",transform:""}),i.removeData("position"),i.data({reposX:e,reposY:o}),i.css("cursor","")}}))}),a=(0,u.default)(".ps-js-cover-reposition-actions").hide(),d=((0,u.default)(".ps-js-cover-reposition-cancel").on("click",function(e){e.preventDefault(),Q.destroy(),Q=null,t.removeClass("ps-focus-cover-edit"),a.hide(),r.css("z-index",""),r.attr("style",r.data("style")).removeData("style")}),(0,u.default)(".ps-js-cover-reposition-confirm").on("click",function(e){e.preventDefault(),Q.destroy(),Q=null,t.removeClass("ps-focus-cover-edit"),a.hide(),r.css("z-index","");e={user_id:g,_wpnonce:m,y:r.data("reposX"),x:r.data("reposY")};h.ajax.post("profile.reposition_cover",e)}),t.find(".ps-js-cover-wrapper")),r=t.find(".ps-js-cover-image"),n=t.find(".ps-js-cover-loading");k||(s.hide(),i.hide());let l=()=>{r.css({height:"auto",width:"100%",minWidth:"100%",maxWidth:"100%"});let e=d.height(),t=d.width(),o=r.height(),i=r.width();o<e&&(r.css({height:"100%",width:"auto",minWidth:"100%",maxWidth:"none"}),o=r.height(),i=r.width());var s=parseFloat(r[0].style.top)||0,s=(o>=e&&s<(s=(o-e)/e*-100)&&r.css("top",s+"%"),parseFloat(r[0].style.left)||0);i>=t&&s<(s=(i-t)/t*-100)&&r.css("left",s+"%"),r.css("opacity","")};l=(0,c.throttle)(l,500),r.each(function(){let e=new Image;e.onload=l,e.src=this.src});let p,f=(h.hooks.addAction("browser_resize","profile_cover",e=>{p&&p===e.width||(p=e.width,l())}),(0,u.default)(".ps-js-cover-button-popup"));f.on("click",function(t){if(t.currentTarget===t.target){let e=(0,u.default)(this);t=e.data("cover-url");t&&peepso.simple_lightbox(t)}}),h.hooks.addAction("profile_cover_updated","page_profile",(e,t)=>{+e==g&&(-1<t.indexOf(`/users/${e}/`)?(f.css("cursor","pointer"),f.data("cover-url",t)):(f.css("cursor",""),f.removeData("cover-url")))})})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,o){"use strict";e("./avatar"),e("./cover")},{"./avatar":6,"./cover":7}],9:[function(e,t,o){"use strict";e("./header"),e("./profile"),e("./about"),e("./profile-extended")},{"./about":3,"./header":8,"./profile":11,"./profile-extended":10}],10:[function(e,t,o){"use strict";jQuery(function(o){var i=".ps-js-profile-separator",e=o(".ps-js-profile-list");e.length&&e.find(i).closest(".ps-js-profile-item").each(function(){var e=o(this),t=e.next();return!t.length||t.find(i).length?(e.remove(),!0):void 0})})},{}],11:[function(e,t,o){!function(o){!function(){"use strict";"undefined"==typeof window&&void 0!==o&&o.peepso;function e(){this.cover={},this.cover.x_position_percent=0,this.cover.y_position_percent=0,this.$cover_ct=jQuery(".js-focus-cover"),this.$cover_image=jQuery("img#"+peepsodata.userid),this.initial_cover_position=this.$cover_image.attr("style"),this.avatar_use_gravatar=!1}var t=window.profile=new e;e.prototype.init=function(){var e=jQuery(".js-collapse-about-btn"),e=(0!==e.length&&e.on("click",function(e){e.preventDefault();e=jQuery(".js-collapse-about");"none"===e.css("display")?e.show():e.hide()}),jQuery(".js-focus-cover").hover(function(){!1===pswindow.is_visible&&jQuery(".js-focus-change-cover").show()},function(){jQuery(".js-focus-change-cover").hide()}),jQuery(".ps-tab__bar").unbind("click"),jQuery(".ps-js-page-about-preferences")),e=(e.length&&(e.find("input[type=checkbox]").on("click.savepref",t.save_preference),e.find("select").on("change.savepref",t.save_preference),e.find(".ps-js-dropdown input[type=hidden]").on("change",t.save_preference),e.find(".ps-preferences__checkbox").find("input[type=checkbox]").off("click.savepref")),jQuery(".ps-js-profile-item"));e.length&&e.each(function(){var e,t=jQuery(this);t.find(".peepso-markdown").length&&(e=peepso.observer.applyFilters("peepso_parse_content",t.html()),t.html(e))})},e.prototype.activate_tab=function(e,t,o){return e.preventDefault(),jQuery(e.target).addClass("active").siblings("[data-toggle=tab]").removeClass("active"),jQuery(o).hide(),jQuery(t).show(),!1},e.prototype.new_like=function(){return peepso.postJson("profile.like",{user_id:peepsodata.userid},function(e){var t,o;e.success?(t=(o=e.data||{}).html,o=o.like_count,jQuery(".ps-js-focus-interactions").html(t),void 0!==o&&peepso.observer.doAction("profile_update_like",peepsodata.userid,o)):psmessage.show("",e.errors[0]).fade_out(psmessage.fade_time)}),!1},e.prototype.unblock_user=function(t,e){this.unblocking_user||(e&&(e=jQuery(e)).find("img").css("display","inline"),e={uid:peepsodata.currentuserid,user_id:t},this.unblocking_user=!0,peepso.postJson("activity.unblockuser",e,jQuery.proxy(function(e){this.unblocking_user=!1,e.success&&(jQuery(".ps-js-focus--"+t).find(".ps-js-focus-actions").html(e.data.actions),psmessage.show(e.data.header,e.data.message,psmessage.fade_time))},this)))},e.prototype.delete_profile=function(){var e=jQuery("#profile-delete-title").html(),t=jQuery("#profile-delete-content").html();pswindow.show(e,t)},e.prototype.delete_profile_action=function(){$req={};var e={uid:peepsodata.currentuserid};peepso.postJson("profile.delete_profile",e,function(e){e.success?window.location=e.data.url:psmessage.show("",e.errors[0]).fade_out(psmessage.fade_time)})},e.prototype.field_changed=function(e,t){e=jQuery(e).data("id");return this.field_changed_list||(this.field_changed_list=[]),-1===this.field_changed_list.indexOf(e)&&this.field_changed_list.push(e),this.change_beforeunload(),!0},e.prototype.change_beforeunload=function(){var e;this.onbeforeunload_changed||((e=this).onbeforeunload_changed=window.onbeforeunload||function(){},window.onbeforeunload=function(){return e.save_field_saving?peepsodata.profile_saving_notice||"The system is currently saving your changes.":e.field_changed_list.length?peepsodata.profile_unsaved_notice||"There are unsaved changes on this page.":void 0})},e.prototype.change_privacy=function(e){var e=jQuery(e),t=e.closest(".ps-js-dropdown"),o=t.find(".ps-js-dropdown-toggle"),i=t.find("input[type=hidden]"),s={},n="[class*=gci-]",a=".ps-privacy-title",t=i.data("id"),d=(i.val(),o.find(n).attr("class")),r=o.find(a).html(),l=e.data("optionValue"),p=e.find(n).attr("class"),f=e.find("span").html();e.parent().children("[data-option-value]").each(function(){var e=jQuery(this),t=e.data("optionValue"),e=e.find(n).attr("class");s[t]=e}),o.find(n).attr("class",p),o.find(a).html(f),peepso.postJson("profilefieldsajax.save_acc",{user_id:peepsodata.currentuserid,view_user_id:peepsodata.userid,id:t,acc:l},function(e){e.success?i.val(l):(o.find(n).attr("class",d),o.find(a).html(r))})},e.prototype.use_gravatar=function(){var i=this;peepso.postJson("profile.use_gravatar",{},function(e){var t,o;e.success&&(t=jQuery("#dialog-upload-avatar-content",jQuery(e.data.html)),o=jQuery("#dialog-upload-avatar .dialog-action").html(),Math.random(),e=(e=e.data.image_url)+(0<=e.indexOf("?")?"&rand=":"?rand=")+Math.random(),jQuery(".js-focus-avatar img",t).attr("src",e),jQuery(".imagePreview img",t).attr("src",e),jQuery(".imagePreview",t).after('<input type="hidden" name="is_tmp" value="1"/>'),jQuery(".ps-js-has-avatar",t).show(),jQuery(".ps-js-no-avatar",t).hide(),jQuery(".ps-js-crop-avatar",t).hide(),pswindow.set_content(t),pswindow.set_actions(o),jQuery("#imagePreview img").one("load",function(){pswindow.refresh()}),i.init_avatar_fileupload(),jQuery("#ps-window button[name=rep_submit]").removeAttr("disabled").addClass("ps-btn-primary"),i.invalid_avatar_upload=!1,i.avatar_use_gravatar=!0)})},e.prototype.save_preference=function(e){var e=jQuery(e&&e.target?e.target:e),t=e.closest(".ps-js-profile-preferences-option").find(".ps-js-loading"),o={};o.user_id=peepsodata.currentuserid,o.view_user_id=peepsodata.userid,o.meta_key=e.attr("name"),o.value=e.is(":checkbox")?e[0].checked?1:0:e.val(),t.find("i").stop().hide(),t.find("img").show(),peepso.postJson("profilepreferencesajax.savepreference",o,function(e){t.find("img").hide(),t.find("i").show().delay(800).fadeOut()})},e.prototype.save_notification=function(e){var e=jQuery(e&&e.target?e.target:e),t=e.closest(".ps-js-notification-option").find(".ps-js-loading"),o={};o.user_id=peepsodata.currentuserid,o.view_user_id=peepsodata.userid,o.fieldname=e.attr("name"),o.value=e.is(":checkbox")?e[0].checked?1:0:e.val(),t.find("i").stop().hide(),t.find("img").show(),peepso.postJson("profilepreferencesajax.save_notifications",o,function(e){t.find("img").hide(),t.find("i").show().delay(800).fadeOut(),e.success})},jQuery(function(){t.init()})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[9]);